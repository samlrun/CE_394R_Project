---
title: "Vehicle Crash Severity Correlating Factors"
author:
- name: Samuel Runyan
  email: samyan@byu.edu
  affiliation: Brigham Young University
  footnote: 1
date: "`r Sys.Date()`"
address:
- code: Brigham Young University
  address: Civil and Environmental Engineering Department, 430 Engineering Building,
    Provo, Utah 84602
site: bookdown::bookdown_site
documentclass: article
journal: Findings
bibliography: book.bib
biblio-style: apalike
link-citations: yes
abstract: |
  This is where the abstract should go.
description: The purpose of this article is to identify the most significant correlating factors to crash severity when performing highway safety analysis.
layout: 3p, authoryear
keywords:
- Highway Safety Analysis
- Crash Severity
- Statistical Correlation
---

# QUESTIONS {#intro}

Placeholder



<!--chapter:end:index.Rmd-->


# METHODS

Placeholder



<!--chapter:end:02-METHODS.Rmd-->

# FINDINGS

```{r setup2, include = FALSE}
# load R libraries here; the `include` flag in the chunk options above tells
# whether to print the results or not. Usually you don't want to print the
# library statements, or any code on the pdf.

# Main Packages ========
# I use these in every doc
library(tidyverse)
library(knitr)
library(kableExtra)
library(modelsummary)
library(ggplot2)

options(dplyr.summarise.inform = FALSE)

# Other packages ------
# These sometimes get used, and sometimes don't.
library(mlogit)

# Load functions ------
source("R/functions.R")

# Instructions and options =========
# prints missing data in tables as blank space
options(knitr.kable.NA = '') 
# tells kableExtra to not load latex table packages in the chunk output
options(kableExtra.latex.load_packages = FALSE) 

# round and format numbers that get printed in the text of the article.
inline_hook <- function(x) {
  if (is.numeric(x)) {
    format(x, digits = 3, big.mark = ",")
  } else x
}
knitr::knit_hooks$set(inline = inline_hook)

knitr::opts_chunk$set(
	echo = FALSE,
	message = FALSE,
	warning = FALSE,
	cache = TRUE
)
# options for latex-only output
if(knitr::is_latex_output()) {
  knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
} 

```

The Pearson correlation factors for severe injury crashes and manner of collision are summarized in Figure \@ref(fig:mannerSeverityCorr). That plot is created with the 'ggplot2()' package and function.

```{r mannerSeverityCorr, fig.align='center'}
# Manner of Collision severe crash correlations ######################################

seg <- read_csv("data/CAMS_Crashes_14-21.csv")
seg <- corrManner(seg,SEG_ID)
int <- read_csv("data/ISAM_Crashes_14-21.csv")
int <- corrManner(int,INT_ID)

df <- data.frame(
  seg["Severities 4-5 (Severe Injury)"],
  int["Severities 4-5 (Severe Injury)"]) %>%
  rownames_to_column(var = "manner") %>%
  rename(
    Segment = "Severities.4.5..Severe.Injury.",
    Intersection = "Severities.4.5..Severe.Injury..1") %>%
  pivot_longer(
    cols = c('Segment','Intersection'), 
    names_to = "Type",
    values_to = "corr",)

ggplot(
  data=df, 
  aes(x=manner, y=corr, fill=Type)) +
  geom_bar(
    stat="identity",
    position=position_dodge())+
  geom_text(
    aes(label=corr), 
    vjust=1.6, 
    color="white", 
    position = position_dodge(0.9), 
    size=3.0)+
  labs(
    title="Correlation Between Manner of Collision and Severe Injury Crashes", 
    x="Manner of Collision", 
    y = "Pearson Correlation Factor")+
  scale_x_discrete(
    labels = function(manner) str_wrap(manner, width = 10))+
  scale_fill_brewer(palette="Paired")+
  theme_minimal()

```

<!-- organize so segments and intersections are mentioned independently -->
Mannners of collision that have a higher correlation factor regarding severe injury crashes are understood to be more severe. First, we notice that single vehicle crashes are much more severe for segments than for intersections. These are a broad category of crashes, so it is difficult to determine the cause of this outright. We also notice that angle crashes tend to be more severe than other crashes, especially at intersections. Furthermore, collisions with parked cars and sideswipes tend to be more severe at segments than intersections while front to rear and head on crashes are similarly severe for both. The only crashes that are very unlikely to be severe are rear to rear and rear to side crashes. 

Unfortunately, these manners of collision do not account for factors such as pedestrian involvement, so it is difficult to determine the impact of pedestrians on crash severity from this data alone. That is why it is useful to evaluate the correlation between crash severity and crashes near schools, bus stops, or crashes which involved pedestrians since these will give a better indication to how varying levels of pedestrian involvement affect crash severity.

This analysis could be used to implement more informed safety measures with crash severity in mind. Knowing  which types of crashes are more likely to lead to severe injury will help officials design roadways and inform the public to better avoid these types of collisions. This has applications in automated vehicles as well because engineers can design vehicles to put special emphasis on avoiding the types of crashes that are more likely to lead to severe injury.

<!--chapter:end:03-FINDINGS.Rmd-->

`r if (knitr::is_html_output()) '
# References {-}
'`
---
nocite: '@*'
---

<!--chapter:end:04-references.Rmd-->

